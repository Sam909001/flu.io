<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$FLUFFI Presale & Staking</title>
  <meta name="description" content="$FLUFFI is a Solana Layer 2 meme token with presale and staking features. Join the community and earn rewards.">
  <meta name="keywords" content="Fluffi, $FLUFFI, crypto, presale, staking, Solana, meme token">
  <meta name="author" content="FLUFFI Team">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.2/dist/ethers.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.7.8/dist/umd/index.min.js"></script>
  
  <style>
    :root {
      --primary: #10b981;
      --primary-dark: #059669;
      --secondary: #3b82f6;
      --accent: #f59e0b;
      --danger: #ef4444;
    }
    
    body {
      background: linear-gradient(to bottom, #fff0f5, #fff9e6);
      color: #1a1a1a;
      min-height: 100vh;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    .dark {
      background: #111827 !important;
      color: #f0f0f0 !important;
    }
    
    .dark .bg-white {
      background-color: #1f2937 !important;
    }

    .dark .bg-green-600 {
      background-color: var(--primary-dark) !important;
    }

    .header-logo {
      animation: fluffi-float 3s ease-in-out infinite;
    }

    @keyframes fluffi-float {
      0%, 100% { transform: translateY(0) scale(1) rotate(0deg); }
      50% { transform: translateY(-15px) scale(1.05) rotate(2deg); }
    }

    .section-card {
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease-in-out;
    }

    .dark .section-card {
      background: #1c1c1c;
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.05);
    }

    .live-badge {
      background: var(--danger);
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.7; }
      100% { opacity: 1; }
    }

    .wallet-connect-btn {
      transition: all 0.2s ease;
    }
    
    .wallet-connect-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    .wallet-connect-btn.connected {
      background: var(--primary);
    }

    .wallet-connect-btn.connected:hover {
      background: var(--primary-dark);
    }

    .progress-bar {
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #4CAF50, #2E7D32);
      transition: width 0.5s ease;
    }

    .price-tooltip .tooltip-text {
      visibility: hidden;
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .price-tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }

    .token-card {
      transition: transform 0.3s;
    }
    
    .token-card:hover {
      transform: translateY(-5px);
    }

    .mobile-wallet-option {
      transition: all 0.2s ease;
      cursor: pointer;
    }
    
    .mobile-wallet-option:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .faq-details {
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 1rem;
    }
    
    .dark .faq-details {
      border-color: #4b5563;
    }
    
    .faq-summary {
      padding: 1rem;
      cursor: pointer;
      font-weight: 600;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .faq-content {
      padding: 0 1rem 1rem;
      color: #4b5563;
    }
    
    .dark .faq-content {
      color: #d1d5db;
    }

    .footer-link {
      transition: opacity 0.3s;
    }
    
    .footer-link:hover {
      opacity: 0.8;
    }

    @media (max-width: 768px) {
      .header-nav {
        flex-wrap: wrap;
      }
      
      .split-sections {
        flex-direction: column;
      }
      
      .wallet-buttons-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>

<body class="text-gray-800 dark:text-white">
  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),
          dl=l!='dataLayer'?'&l='+l:'';
      j.async=true;
      j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NP56LP23');
  </script>
  <!-- End Google Tag Manager -->

  <!-- Header -->
  <header class="flex flex-col md:flex-row items-center justify-between px-4 py-3 bg-green-600 shadow sticky top-0 z-10">
    <div class="flex items-center gap-3">
      <div class="header-logo w-10 h-10 bg-gray-200 border-2 border-dashed rounded-xl flex items-center justify-center">
        <span class="text-lg font-bold">F</span>
      </div>
      <h1 class="text-3xl md:text-4xl font-bold text-white">$FLUFFI</h1>
    </div>
    <nav class="header-nav flex flex-wrap gap-4 mt-2 md:mt-0 text-sm font-semibold">
      <a href="#presale" class="text-white hover:underline">Presale</a>
      <a href="#staking" class="text-white hover:underline">Staking</a>
      <a href="#tokenomics" class="text-white hover:underline">Tokenomics</a>
      <a href="#faq" class="text-white hover:underline">FAQ</a>
      <a href="referral.html" target="_blank" rel="noopener noreferrer" class="text-white hover:underline">Referral</a>
      <a href="how-to-buy.html" target="_blank" rel="noopener noreferrer" class="bg-green-700 hover:bg-green-800 text-white py-2 px-4 rounded">
        How to Buy
      </a>
      <button onclick="toggleDarkMode()" class="ml-2 bg-gray-300 dark:bg-gray-700 px-2 rounded text-black dark:text-white" aria-label="Toggle dark mode">
        <span id="darkModeIcon">🌙</span>
      </button>
      <button id="walletButton" class="bg-green-700 hover:bg-green-800 text-white py-1 px-3 rounded">Connect Wallet</button>
    </nav>
  </header>

  <main class="p-4 md:p-6 mx-auto w-full max-w-6xl">
    <!-- Hero Section -->
    <section class="text-center py-10 md:py-16">
      <h1 class="text-4xl md:text-6xl font-bold mb-4">The Fluffiest Meme Token on Solana</h1>
      <p class="text-xl md:text-2xl text-gray-600 dark:text-gray-300 max-w-2xl mx-auto mb-8">
        Join the $FLUFFI revolution - combining meme culture with real utility and high APY staking
      </p>
      <div class="flex flex-wrap justify-center gap-4">
        <a href="#presale" class="bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-full text-lg transition-all">
          Join Presale
        </a>
        <a href="#staking" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-all">
          Start Staking
        </a>
      </div>
    </section>

    <!-- Timer Section -->
    <div id="countdown-container" class="section-card text-center my-8 p-6 max-w-xl mx-auto">
      <h3 class="text-xl font-bold mb-4 text-gray-800 dark:text-gray-100">🚀 PRESALE ENDS IN:</h3>
      <div id="presale-timer" class="text-3xl md:text-4xl font-mono text-red-600 dark:text-red-300 space-x-3">
        <span id="presale-minutes">15</span>:<span id="presale-seconds">00</span>
      </div>
      
      <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
        <h4 class="text-lg font-semibold mb-3 text-gray-700 dark:text-gray-300">Current Stage Progress</h4>
        
        <div class="w-full bg-gray-300 dark:bg-gray-600 h-4 rounded-full overflow-hidden mb-3">
          <div id="stageProgressBar" class="h-full bg-green-500 transition-all duration-1000 ease-in-out" style="width: 0%"></div>
        </div>

        <div class="flex justify-between text-sm font-mono text-gray-700 dark:text-gray-300">
          <span>Stage: <span id="current-stage">1</span>/15</span>
          <span>Ends in: <span id="stage-seconds">60</span>s</span>
        </div>
      </div>
    </div>

    <!-- Presale Section -->
    <section id="presale" class="section-card mb-8 p-6">
      <h2 class="text-2xl md:text-3xl font-bold mb-6">🚀 Presale is Live!</h2>

      <!-- Enhanced Wallet Connection -->
      <div class="wallet-connect-section bg-gray-100 dark:bg-gray-800 p-4 rounded-lg mb-6">
        <h3 class="text-lg font-semibold mb-3 dark:text-white">Connect Your Wallet</h3>
        
        <div class="wallet-buttons-grid grid grid-cols-2 md:grid-cols-4 gap-3 mb-3">
          <button id="metamaskBtn" class="wallet-connect-btn bg-orange-500 hover:bg-orange-600 text-white p-3 rounded-lg font-medium">
            <i class="fab fa-ethereum mr-2"></i> MetaMask
          </button>
          
          <button id="mobileWalletBtn" class="wallet-connect-btn bg-indigo-500 hover:bg-indigo-600 text-white p-3 rounded-lg font-medium">
            <i class="fas fa-mobile-alt mr-2"></i> Mobile
          </button>
          
          <button id="trustBtn" class="wallet-connect-btn bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg font-medium">
            <i class="fas fa-shield-alt mr-2"></i> Trust
          </button>
          
          <button id="walletConnectBtn" class="wallet-connect-btn bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg font-medium">
            <i class="fas fa-link mr-2"></i> WalletConnect
          </button>
        </div>

        <div id="walletError" class="wallet-error bg-red-100 text-red-700 p-3 rounded-lg hidden"></div>
        
        <div id="walletStatus" class="wallet-address bg-gray-200 dark:bg-gray-700 p-3 rounded-lg mt-3 hidden">
          <div class="flex justify-between items-center">
            <div>
              <strong>Connected:</strong> 
              <span id="connectedAddress" class="font-mono"></span>
            </div>
            <button onclick="disconnectWallet()" class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm">
              Disconnect
            </button>
          </div>
        </div>
      </div>

      <!-- Presale Info -->
      <div class="grid md:grid-cols-2 gap-6 mb-6">
        <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg">
          <div class="flex justify-between items-center mb-2">
            <span class="font-medium">Current Price:</span>
            <div class="price-container">
              <span id="currentPrice" class="text-xl font-bold text-green-600">$0.000100</span>
              <span class="price-tooltip ml-1">
                <i class="fas fa-info-circle text-blue-500 cursor-pointer"></i>
                <span class="tooltip-text absolute bg-gray-900 text-white text-sm p-2 rounded mt-2 w-64 z-10 hidden md:block">
                  <strong>Price Increase:</strong><br>
                  +5% per stage (every 1 minute)<br>
                  Next increase: <span id="nextIncreaseTime">00:59</span>
                </span>
              </span>
            </div>
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-300">+0.00% since last stage</div>
        </div>
        
        <div class="bg-gray-100 dark:bg-gray-800 p-4 rounded-lg">
          <div class="flex justify-between mb-2">
            <span class="font-medium">Tokens Sold:</span>
            <span id="tokensSold" class="font-mono font-bold">67,431,509</span>
          </div>
          <div class="text-sm text-green-600 font-medium">🎯 Referral Bonus: <strong>10%</strong></div>
        </div>
      </div>

      <!-- Purchase Form -->
      <div class="mb-4">
        <label class="block text-gray-700 dark:text-gray-300 mb-2">Amount to Purchase</label>
        <div class="flex gap-3 mb-3">
          <input type="number" placeholder="Amount" id="amountInput" class="flex-1 p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600">
          <select id="currencySelect" class="p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600">
            <option value="BNB">BNB</option>
            <option value="USD">USD</option>
          </select>
        </div>
        
        <label class="block text-gray-700 dark:text-gray-300 mb-2">Referral Wallet (Optional)</label>
        <input type="text" placeholder="Referral wallet address" id="refInput" class="w-full p-3 border rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-green-500 dark:bg-gray-700 dark:border-gray-600">
        
        <button onclick="buyFluffi()" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 px-6 rounded-lg font-bold text-lg transition-colors">
          🚀 Buy $FLUFFI
        </button>
      </div>
    </section>
    
    <!-- Referral Section -->
    <section id="referral" class="section-card mb-8 p-6">
      <h2 class="text-2xl md:text-3xl font-bold mb-4">💰 Earn with Referrals</h2>
      <div id="referralSection" class="space-y-4">
        <p class="mb-4">Connect your wallet to access your referral link and start earning 10% on every referral purchase!</p>
        <button id="referralConnectBtn" onclick="connectReferralWallet()" class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg font-semibold">
          Connect Wallet for Referrals
        </button>
      </div>
    </section>

    <!-- Claim & Staking Sections -->
    <div class="grid md:grid-cols-2 gap-6 mb-8">
      <!-- Claim Section -->
      <section class="section-card p-6">
        <h2 class="text-2xl font-bold mb-4">🎁 Claim Your $FLUFFI</h2>
        <p class="mb-4">Once the presale ends, claim your purchased tokens here.</p>
        
        <div class="bg-gray-100 dark:bg-gray-700 p-4 rounded-lg mb-4">
          <h3 class="font-semibold mb-3">Your Balances</h3>
          <div class="grid grid-cols-2 gap-3">
            <div>
              <p class="text-sm text-gray-600 dark:text-gray-300">Wallet Balance:</p>
              <p class="font-mono font-bold" id="userBalance">0 FLUFFI</p>
            </div>
            <div>
              <p class="text-sm text-gray-600 dark:text-gray-300">Presale Allocation:</p>
              <p class="font-mono font-bold" id="userPresale">0 FLUFFI</p>
            </div>
            <div>
              <p class="text-sm text-gray-600 dark:text-gray-300">Staked:</p>
              <p class="font-mono font-bold" id="userStaked">0 FLUFFI</p>
            </div>
            <div>
              <p class="text-sm text-gray-600 dark:text-gray-300">Rewards:</p>
              <p class="font-mono font-bold" id="userRewards">0 FLUFFI</p>
            </div>
          </div>
        </div>
        
        <button onclick="claimTokens()" class="w-full bg-blue-500 hover:bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold">
          Claim Tokens
        </button>
      </section>

      <!-- Staking Section -->
      <section id="staking" class="section-card p-6">
        <h2 class="text-2xl font-bold mb-4">📈 Stake $FLUFFI</h2>
        <div class="bg-yellow-100 dark:bg-yellow-900/30 p-4 rounded-lg mb-4">
          <div class="flex items-center mb-2">
            <i class="fas fa-fire text-yellow-500 text-xl mr-2"></i>
            <span class="font-bold">Current APY: <span class="text-yellow-600 dark:text-yellow-400">90%</span></span>
          </div>
          <p class="text-sm text-gray-700 dark:text-gray-300">Staking rewards end at token listing date</p>
        </div>
        
        <div class="mb-4">
          <label class="block text-gray-700 dark:text-gray-300 mb-2">Amount to Stake</label>
          <input type="number" placeholder="FLUFFI amount" id="stakeInput" class="w-full p-3 border rounded-lg mb-3 focus:outline-none focus:ring-2 focus:ring-yellow-500 dark:bg-gray-700 dark:border-gray-600">
          <button onclick="stakeFluffi()" class="w-full bg-yellow-500 hover:bg-yellow-600 text-white py-3 px-6 rounded-lg font-semibold">
            Stake Now
          </button>
        </div>
      </section>
    </div>
    
    <!-- Tokenomics Section -->
    <section id="tokenomics" class="section-card px-6 py-8 mb-8">
      <h2 class="text-3xl font-extrabold text-center text-green-700 dark:text-green-400 mb-8">📊 Tokenomics</h2>

      <div class="grid md:grid-cols-2 gap-10 items-center">
        <!-- Token Details -->
        <div>
          <ul class="space-y-4 text-lg">
            <li class="flex justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
              <span>Total Supply:</span>
              <span class="font-bold">10,000,000,000 FLUFFI</span>
            </li>
            <li class="flex justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
              <span>Presale:</span>
              <span class="font-bold">40% (4B)</span>
            </li>
            <li class="flex justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
              <span>Liquidity:</span>
              <span class="font-bold">30% (Locked)</span>
            </li>
            <li class="flex justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
              <span>Staking:</span>
              <span class="font-bold">20%</span>
            </li>
            <li class="flex justify-between pb-2 border-b border-gray-200 dark:border-gray-700">
              <span>Marketing:</span>
              <span class="font-bold">5%</span>
            </li>
            <li class="flex justify-between">
              <span>Team:</span>
              <span class="font-bold">5% (Locked)</span>
            </li>
          </ul>
        </div>

        <!-- Chart -->
        <div class="flex justify-center">
          <canvas id="tokenChart" width="280" height="280"></canvas>
        </div>
      </div>
    </section>
    
    <!-- FAQ Section -->
    <section id="faq" class="section-card p-6 mb-8 max-w-3xl mx-auto">
      <h2 class="text-3xl font-bold text-center mb-8 text-purple-700 dark:text-purple-400">❓ Frequently Asked Questions</h2>

      <div class="faq-details">
        <div class="faq-summary">
          <span>What's the token tax?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-content">
          <p>5% total tax on all transactions:</p>
          <ul class="list-disc list-inside ml-4 mt-2">
            <li>3% Marketing</li>
            <li>2% Automatic Liquidity</li>
          </ul>
        </div>
      </div>

      <div class="faq-details">
        <div class="faq-summary">
          <span>How to claim after presale?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-content">
          Tokens will be automatically airdropped to your wallet within 24 hours of launch. No manual claiming needed.
        </div>
      </div>

      <div class="faq-details">
        <div class="faq-summary">
          <span>What's the vesting schedule?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-content">
          <ul class="list-disc list-inside ml-4">
            <li>Presale tokens: 100% unlocked at TGE</li>
            <li>Team tokens: 24-month linear vesting</li>
          </ul>
        </div>
      </div>

      <div class="faq-details">
        <div class="faq-summary">
          <span>How do I buy $FLUFFI?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-content">
          Connect your wallet, enter amount in BNB, and click "Buy Now".
        </div>
      </div>

      <div class="faq-details">
        <div class="faq-summary">
          <span>When does staking end?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-content">
          Staking ends at the official listing date.
        </div>
      </div>

      <div class="faq-details">
        <div class="faq-summary">
          <span>What chains are supported?</span>
          <i class="fas fa-chevron-down"></i>
        </div>
        <div class="faq-content">
          Currently supporting BNB, with plans for ETH, SOL, and AVAX.
        </div>
      </div>
    </section>

    <!-- Team & About Sections -->
    <div class="split-sections grid md:grid-cols-2 gap-8 mb-8">
      <!-- About Section -->
      <section id="about" class="section-card p-6">
        <h2 class="text-2xl font-bold mb-4 text-green-600">Why Fluffi Coin?</h2>
        <div class="about-content">
          <p class="mb-4">Fluffi Coin combines viral meme appeal with powerful real-world utility and DeFi innovation:</p>
          <ul class="space-y-4">
            <li class="flex">
              <div class="bg-green-100 dark:bg-green-900/30 w-10 h-10 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas fa-coins text-green-600"></i>
              </div>
              <div>
                <strong>NFT STAKING PLATFORM</strong>
                <p class="text-sm text-gray-600 dark:text-gray-300">Launching Q3 2025 - Stake Fluffi NFTs to earn exclusive rewards</p>
              </div>
            </li>
            <li class="flex">
              <div class="bg-green-100 dark:bg-green-900/30 w-10 h-10 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas fa-vote-yea text-green-600"></i>
              </div>
              <div>
                <strong>COMMUNITY DAO GOVERNANCE</strong>
                <p class="text-sm text-gray-600 dark:text-gray-300">Vote on major decisions like treasury use and protocol upgrades</p>
              </div>
            </li>
            <li class="flex">
              <div class="bg-green-100 dark:bg-green-900/30 w-10 h-10 rounded-full flex items-center justify-center mr-3 flex-shrink-0">
                <i class="fas fa-burn text-green-600"></i>
              </div>
              <div>
                <strong>DEFLATIONARY MECHANICS</strong>
                <p class="text-sm text-gray-600 dark:text-gray-300">1% burn on every transaction reduces supply permanently</p>
              </div>
            </li>
          </ul>
          <p class="mt-4">Fluffi bridges meme culture with sustainable financial infrastructure for the future.</p>
        </div>
      </section>

      <!-- Team Section -->
      <section id="team" class="section-card p-6">
        <h2 class="text-2xl font-bold mb-4 text-green-600">Our Team</h2>
        <div class="team-grid grid grid-cols-1 gap-6">
          <div class="team-member flex items-start">
            <div class="bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mr-4"></div>
            <div>
              <h3 class="font-bold text-lg">James Chen</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">Former Lead Blockchain Architect at ConsenSys. 12 years experience in smart contract development and protocol design.</p>
            </div>
          </div>
          <div class="team-member flex items-start">
            <div class="bg-gray-200 border-2 border-dashed rounded-xl w-16 h-16 mr-4"></div>
            <div>
              <h3 class="font-bold text-lg">Priya Patel</h3>
              <p class="text-sm text-gray-600 dark:text-gray-300">Ex-Senior Engineer at Polygon. Specialized in ZK-rollups and Layer 2 scaling solutions.</p>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer class="flex flex-col md:flex-row justify-between px-6 py-6 text-sm text-gray-600 dark:text-gray-300 bg-gray-100 dark:bg-gray-800">
    <div class="mb-4 md:mb-0">© 2025 $FLUFFI Token - All Rights Reserved</div>
    <div class="flex gap-4 justify-center md:justify-end">
      <a href="https://t.me/FLUFFISOLANALAYER2" target="_blank" rel="noopener noreferrer" class="footer-link" title="Telegram">
        <i class="fab fa-telegram text-xl"></i>
      </a>
      <a href="https://x.com/FLUFFIOFFICIAL" target="_blank" rel="noopener noreferrer" class="footer-link" title="Twitter">
        <i class="fab fa-twitter text-xl"></i>
      </a>
      <a href="https://discord.gg/fluffi" target="_blank" rel="noopener noreferrer" class="footer-link" title="Discord">
        <i class="fab fa-discord text-xl"></i>
      </a>
    </div>
  </footer>

  <!-- Mobile Wallet Modal -->
  <div id="mobileWalletModal" class="fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4 hidden">
    <div class="bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md">
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-xl font-bold dark:text-white">Connect Mobile Wallet</h3>
        <button onclick="closeMobileWalletModal()" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-2xl">
          &times;
        </button>
      </div>
      
      <div class="mobile-wallet-options-grid space-y-3">
        <div class="mobile-wallet-option bg-gray-100 dark:bg-gray-700 p-4 rounded-lg" onclick="connectMetaMaskMobile()">
          <div class="flex items-center">
            <div class="bg-gray-200 border-2 border-dashed rounded-xl w-12 h-12 mr-4"></div>
            <div>
              <h4 class="font-bold">MetaMask Mobile</h4>
              <p class="text-sm text-gray-600 dark:text-gray-300">Most popular Ethereum wallet</p>
            </div>
          </div>
        </div>
        
        <div class="mobile-wallet-option bg-gray-100 dark:bg-gray-700 p-4 rounded-lg" onclick="connectTrustWallet()">
          <div class="flex items-center">
            <div class="bg-gray-200 border-2 border-dashed rounded-xl w-12 h-12 mr-4"></div>
            <div>
              <h4 class="font-bold">Trust Wallet</h4>
              <p class="text-sm text-gray-600 dark:text-gray-300">Secure multi-crypto wallet</p>
            </div>
          </div>
        </div>
        
        <div class="mobile-wallet-option bg-gray-100 dark:bg-gray-700 p-4 rounded-lg" onclick="connectRainbowWallet()">
          <div class="flex items-center">
            <div class="bg-gray-200 border-2 border-dashed rounded-xl w-12 h-12 mr-4"></div>
            <div>
              <h4 class="font-bold">Rainbow Wallet</h4>
              <p class="text-sm text-gray-600 dark:text-gray-300">Fun, simple & secure</p>
            </div>
          </div>
        </div>
      </div>
      
      <div id="mobileWalletError" class="bg-red-100 text-red-700 p-3 rounded-lg mt-4 hidden"></div>
    </div>
  </div>

  <script>
    // ===== STATE MANAGEMENT =====
    const state = {
      userWalletAddress: null,
      walletProvider: null,
      ethersProvider: null,
      walletConnectProvider: null,
      currentChainId: null,
      presaleStartTime: null,
      presaleEndTime: null,
      stageDuration: 60, // seconds per stage
      totalStages: 15,
      currentPrice: 0.0001,
      tokensSold: 67431509
    };
    
    // ===== WALLET MANAGEMENT =====
    async function connectBrowserWallet() {
      try {
        if (typeof window.ethereum === 'undefined') {
          throw new Error('MetaMask or compatible wallet not detected');
        }

        const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
        
        if (accounts.length === 0) {
          throw new Error('No accounts found. Please unlock your wallet.');
        }

        state.userWalletAddress = accounts[0];
        state.walletProvider = window.ethereum;
        state.ethersProvider = new ethers.BrowserProvider(window.ethereum);

        // Get current chain
        const network = await state.ethersProvider.getNetwork();
        state.currentChainId = Number(network.chainId);
        
        window.ethereum.on('accountsChanged', handleAccountsChanged);
        window.ethereum.on('chainChanged', handleChainChanged);

        updateWalletUI();
        closeMobileWalletModal();
        return true;
      } catch (error) {
        showWalletError(error.message);
        return false;
      }
    }

    async function connectWalletConnect() {
      try {
        state.walletConnectProvider = new WalletConnectProvider.default({
          rpc: {
            56: "https://bsc-dataseed.binance.org/",
            97: "https://data-seed-prebsc-1-s1.binance.org:8545/",
            137: "https://polygon-rpc.com/",
            43114: "https://api.avax.network/ext/bc/C/rpc"
          }
        });

        await state.walletConnectProvider.enable();
        
        const accounts = await state.walletConnectProvider.request({ method: 'eth_accounts' });
        if (accounts.length === 0) throw new Error('No accounts found');
        
        state.userWalletAddress = accounts[0];
        state.ethersProvider = new ethers.BrowserProvider(state.walletConnectProvider);
        
        state.walletConnectProvider.on('accountsChanged', handleAccountsChanged);
        state.walletConnectProvider.on('chainChanged', handleChainChanged);
        state.walletConnectProvider.on('disconnect', handleDisconnect);

        updateWalletUI();
        closeMobileWalletModal();
        return true;
      } catch (error) {
        showWalletError(error.message);
        return false;
      }
    }

    function handleAccountsChanged(accounts) {
      if (accounts.length === 0) {
        disconnectWallet();
      } else {
        state.userWalletAddress = accounts[0];
        updateWalletUI();
      }
    }

    function handleChainChanged(chainId) {
      state.currentChainId = parseInt(chainId, 16);
      window.location.reload();
    }

    function handleDisconnect() {
      disconnectWallet();
    }

    function disconnectWallet() {
      if (state.walletConnectProvider) {
        state.walletConnectProvider.disconnect();
        state.walletConnectProvider = null;
      }
      
      if (window.ethereum && window.ethereum.removeListener) {
        window.ethereum.removeListener('accountsChanged', handleAccountsChanged);
        window.ethereum.removeListener('chainChanged', handleChainChanged);
      }
      
      state.userWalletAddress = null;
      state.walletProvider = null;
      state.ethersProvider = null;
      state.currentChainId = null;
      
      updateWalletUI();
    }

    function updateWalletUI() {
      const walletBtn = document.getElementById('walletButton');
      const walletStatus = document.getElementById('walletStatus');
      const connectedAddress = document.getElementById('connectedAddress');
      
      if (state.userWalletAddress) {
        // Update main wallet button
        const shortAddress = `${state.userWalletAddress.slice(0, 6)}...${state.userWalletAddress.slice(-4)}`;
        walletBtn.innerHTML = `<i class="fas fa-wallet mr-1"></i>${shortAddress}`;
        
        // Show wallet status
        walletStatus.classList.remove('hidden');
        connectedAddress.textContent = shortAddress;
        
        // Update wallet connection buttons
        const walletButtons = ['metamaskBtn', 'mobileWalletBtn', 'trustBtn', 'walletConnectBtn'];
        walletButtons.forEach(id => {
          const btn = document.getElementById(id);
          if (btn) {
            btn.innerHTML = `<i class="fas fa-check-circle mr-2"></i> Connected`;
            btn.classList.add('connected');
          }
        });
      } else {
        // Reset wallet button
        walletBtn.innerHTML = '<i class="fas fa-wallet mr-1"></i> Connect Wallet';
        walletStatus.classList.add('hidden');
        
        // Reset wallet connection buttons
        const resetButtons = [
          ['metamaskBtn', '<i class="fab fa-ethereum mr-2"></i> MetaMask'],
          ['mobileWalletBtn', '<i class="fas fa-mobile-alt mr-2"></i> Mobile'],
          ['trustBtn', '<i class="fas fa-shield-alt mr-2"></i> Trust'],
          ['walletConnectBtn', '<i class="fas fa-link mr-2"></i> WalletConnect']
        ];
        
        resetButtons.forEach(([id, text]) => {
          const btn = document.getElementById(id);
          if (btn) {
            btn.innerHTML = text;
            btn.classList.remove('connected');
          }
        });
      }
    }

    function showWalletError(message) {
      const errorEl = document.getElementById('walletError');
      if (errorEl) {
        errorEl.textContent = message;
        errorEl.classList.remove('hidden');
        setTimeout(() => {
          errorEl.classList.add('hidden');
        }, 5000);
      }
    }

    function openMobileWalletModal() {
      document.getElementById('mobileWalletModal').classList.remove('hidden');
    }

    function closeMobileWalletModal() {
      document.getElementById('mobileWalletModal').classList.add('hidden');
    }

    function connectTrustWallet() {
      const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
      if (isMobile) {
        const dappUrl = encodeURIComponent(window.location.href);
        window.location.href = `trust://browser?url=${dappUrl}`;
        setTimeout(() => {
          window.open('https://trustwallet.com/download', '_blank');
        }, 3000);
      } else {
        window.open('https://trustwallet.com/', '_blank');
      }
    }

    function connectMetaMaskMobile() {
      const dapp = `${window.location.host}${window.location.pathname}`;
      window.location.href = `https://metamask.app.link/dapp/${dapp}`;
    }

    function connectRainbowWallet() {
      const dappUrl = encodeURIComponent(window.location.href);
      window.location.href = `rainbow://wc?uri=${dappUrl}`;
      setTimeout(() => {
        window.open('https://rainbow.me/', '_blank');
      }, 3000);
    }

    // ===== PRESALE FUNCTIONS =====
    function initPresaleTimer() {
      // Get or set presale start time
      state.presaleStartTime = localStorage.getItem('presaleStartTime');
      if (!state.presaleStartTime) {
        state.presaleStartTime = Date.now();
        localStorage.setItem('presaleStartTime', state.presaleStartTime);
      } else {
        state.presaleStartTime = parseInt(state.presaleStartTime);
      }
      
      // Calculate end time (15 minutes from start)
      state.presaleEndTime = state.presaleStartTime + (15 * 60 * 1000);
      
      // Start timer
      updatePresaleTimers();
      setInterval(updatePresaleTimers, 1000);
    }

    function updatePresaleTimers() {
      const now = Date.now();
      const timeLeft = state.presaleEndTime - now;
      
      // Calculate stage
      const timeSinceStart = now - state.presaleStartTime;
      const currentStage = Math.min(
        Math.floor(timeSinceStart / (state.stageDuration * 1000)),
        state.totalStages - 1
      );
      
      // Calculate stage time left
      const stageEndTime = state.presaleStartTime + ((currentStage + 1) * state.stageDuration * 1000);
      const stageTimeLeft = stageEndTime - now;
      
      // Update price (5% increase per stage)
      state.currentPrice = (0.0001 * Math.pow(1.05, currentStage)).toFixed(6);
      
      // Update displays
      document.getElementById('current-stage').textContent = currentStage + 1;
      document.getElementById('currentPrice').textContent = `$${state.currentPrice}`;
      document.getElementById('tokensSold').textContent = state.tokensSold.toLocaleString();
      
      // Update progress bar
      const stageProgress = 1 - (stageTimeLeft / (state.stageDuration * 1000));
      const overallProgress = ((currentStage + stageProgress) / state.totalStages) * 100;
      document.getElementById('stageProgressBar').style.width = `${overallProgress}%`;
      
      // Update next increase time
      const nextMins = Math.floor(stageTimeLeft / 60000);
      const nextSecs = Math.floor((stageTimeLeft % 60000) / 1000);
      document.getElementById('nextIncreaseTime').textContent = 
        `${nextMins.toString().padStart(2, '0')}:${nextSecs.toString().padStart(2, '0')}`;
      
      // Update timers
      if (timeLeft <= 0) {
        document.getElementById('presale-timer').innerHTML = "🎉 Presale Ended!";
        document.getElementById('stage-seconds').textContent = "0";
      } else {
        document.getElementById('presale-minutes').textContent = 
          Math.floor(timeLeft / 60000).toString().padStart(2, '0');
        document.getElementById('presale-seconds').textContent = 
          Math.floor((timeLeft % 60000) / 1000).toString().padStart(2, '0');
        document.getElementById('stage-seconds').textContent = 
          Math.floor(stageTimeLeft / 1000);
      }
    }

    async function buyFluffi() {
      const buyBtn = document.querySelector('button[onclick="buyFluffi()"]');
      const originalText = buyBtn.innerHTML;
      
      try {
        // Validate input
        const amount = document.getElementById("amountInput").value;
        if (!amount || isNaN(amount) {
          throw new Error("Please enter a valid amount");
        }

        // Check wallet connection
        if (!state.userWalletAddress) {
          const connected = await connectBrowserWallet();
          if (!connected) throw new Error("Wallet not connected");
        }

        // Get referral address
        const refInput = document.getElementById("refInput").value.trim();
        const referralAddress = refInput && ethers.isAddress(refInput) 
          ? refInput 
          : ethers.ZeroAddress;

        // Update UI
        buyBtn.disabled = true;
        buyBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        
        // Simulate transaction (in a real app, this would be a contract call)
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Update tokens sold
        state.tokensSold += Math.floor(parseFloat(amount) * 10000);
        updatePresaleTimers();
        
        // Show success
        alert(`✅ Success! You've purchased $${amount} worth of $FLUFFI`);
      } catch (error) {
        alert(`❌ Error: ${error.message}`);
      } finally {
        buyBtn.disabled = false;
        buyBtn.innerHTML = originalText;
      }
    }

    async function stakeFluffi() {
      const stakeBtn = document.querySelector('#staking button');
      const originalText = stakeBtn.innerHTML;
      
      try {
        const amount = document.getElementById("stakeInput").value;
        if (!amount || isNaN(amount)) {
          throw new Error("Please enter a valid amount");
        }

        // Simulate staking
        stakeBtn.disabled = true;
        stakeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        alert(`✅ Success! You've staked ${amount} $FLUFFI`);
      } catch (error) {
        alert(`❌ Error: ${error.message}`);
      } finally {
        stakeBtn.disabled = false;
        stakeBtn.innerHTML = originalText;
      }
    }

    async function claimTokens() {
      const claimBtn = document.querySelector('#claim button');
      const originalText = claimBtn.innerHTML;
      
      try {
        claimBtn.disabled = true;
        claimBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        alert("✅ Tokens claimed successfully!");
      } catch (error) {
        alert(`❌ Error: ${error.message}`);
      } finally {
        claimBtn.disabled = false;
        claimBtn.innerHTML = originalText;
      }
    }

    // ===== UI FUNCTIONS =====
    function toggleDarkMode() {
      const html = document.documentElement;
      html.classList.toggle('dark');
      localStorage.setItem('darkMode', html.classList.contains('dark'));
      
      // Update icon
      const darkModeIcon = document.getElementById('darkModeIcon');
      darkModeIcon.textContent = html.classList.contains('dark') ? '☀️' : '🌙';
      
      // Update chart
      initTokenChart();
    }

    function initTokenChart() {
      const ctx = document.getElementById('tokenChart').getContext('2d');
      const isDark = document.documentElement.classList.contains('dark');
      
      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: ['Presale (40%)', 'Liquidity (30%)', 'Staking (20%)', 'Marketing (5%)', 'Team (5%)'],
          datasets: [{
            data: [40, 30, 20, 5, 5],
            backgroundColor: [
              '#10B981', // Green
              '#3B82F6', // Blue
              '#F59E0B', // Yellow
              '#EF4444', // Red
              '#8B5CF6'  // Purple
            ],
            borderWidth: 2,
            borderColor: isDark ? '#1f2937' : '#ffffff'
          }]
        },
        options: {
          cutout: '65%',
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                color: isDark ? '#f9fafb' : '#111827',
                font: {
                  size: 14
                },
                padding: 20,
              }
            }
          },
          responsive: true,
          maintainAspectRatio: false
        }
      });
    }

    function setupFAQ() {
      document.querySelectorAll('.faq-summary').forEach(summary => {
        summary.addEventListener('click', function() {
          const content = this.nextElementSibling;
          const isOpen = content.style.display === 'block';
          
          // Toggle all FAQ items
          document.querySelectorAll('.faq-content').forEach(el => {
            el.style.display = 'none';
          });
          
          // Reset all chevrons
          document.querySelectorAll('.faq-summary i').forEach(icon => {
            icon.classList.remove('fa-chevron-up');
            icon.classList.add('fa-chevron-down');
          });
          
          if (!isOpen) {
            content.style.display = 'block';
            this.querySelector('i').classList.remove('fa-chevron-down');
            this.querySelector('i').classList.add('fa-chevron-up');
          }
        });
      });
    }

    // ===== INITIALIZATION =====
    document.addEventListener('DOMContentLoaded', () => {
      // Apply dark mode if preferred
      if (localStorage.getItem('darkMode') === 'true' || 
          (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
        document.getElementById('darkModeIcon').textContent = '☀️';
      }
      
      // Initialize components
      initPresaleTimer();
      initTokenChart();
      setupFAQ();
      
      // Set up wallet button
      document.getElementById('walletButton').addEventListener('click', async () => {
        if (state.userWalletAddress) {
          disconnectWallet();
        } else {
          await connectBrowserWallet();
        }
      });
      
      // Set up wallet provider buttons
      document.getElementById('metamaskBtn').addEventListener('click', connectBrowserWallet);
      document.getElementById('mobileWalletBtn').addEventListener('click', openMobileWalletModal);
      document.getElementById('trustBtn').addEventListener('click', connectTrustWallet);
      document.getElementById('walletConnectBtn').addEventListener('click', connectWalletConnect);
    });
  </script>
</body>
</html>
